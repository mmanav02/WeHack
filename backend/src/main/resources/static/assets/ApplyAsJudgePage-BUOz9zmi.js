import{r as o,j as e,C as c,m as l,n as d,i as t,B as x,h as r,l as k,w as v}from"./mui-6pu-mHHs.js";import{u as A,a as C}from"./index-CeQrkf_Y.js";import{b as S,u as w}from"./router-Btts6DUI.js";import{J as p,q as I}from"./mui-icons-ByUxv65T.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const R=()=>{const{hackathonId:a}=S(),n=w(),{user:s}=A(),[u,m]=o.useState(!1),[y,f]=o.useState(!1),[g,i]=o.useState("");o.useEffect(()=>{s&&a&&j()},[s,a]);const j=async()=>{if(!s){i("You must be logged in to apply as a judge.");return}if(!a){i("Invalid hackathon ID");return}m(!0),i("");try{await C.joinHackathon({userId:s.id,hackathonId:parseInt(a),role:"JUDGE"}),f(!0),setTimeout(()=>{n(`/hackathons/${a}`)},3e3)}catch(h){console.error("Judge application failed:",h);const b=h.response?.data?.message||h.message||"Application failed. Please try again.";i(b)}finally{m(!1)}};return s?y?e.jsx(c,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(l,{elevation:3,children:e.jsxs(d,{sx:{p:4,textAlign:"center"},children:[e.jsx(I,{sx:{fontSize:60,color:"success.main",mb:2}}),e.jsx(t,{variant:"h4",color:"success.main",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Judge Request Sent! 🎉"}),e.jsxs(t,{variant:"h6",sx:{mb:2},children:["Thank you for your interest in judging, ",s?.username||s?.email,"!"]}),e.jsx(t,{variant:"body1",sx:{mb:2},children:"Your judge request has been sent to the hackathon organizers."}),e.jsx(t,{variant:"body2",color:"textSecondary",sx:{mb:3},children:"The organizers will review your request and notify you of their decision."}),e.jsx(t,{variant:"body2",color:"textSecondary",children:"Redirecting to hackathon details in 3 seconds..."}),e.jsxs(x,{sx:{mt:3},children:[e.jsx(r,{variant:"contained",onClick:()=>n(`/hackathons/${a}`),sx:{mr:2},children:"Go to Hackathon"}),e.jsx(r,{variant:"outlined",onClick:()=>n("/hackathons"),children:"View All Hackathons"})]})]})})}):u?e.jsx(c,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(l,{elevation:3,children:e.jsxs(d,{sx:{p:4,textAlign:"center"},children:[e.jsx(k,{size:60,sx:{mb:3}}),e.jsx(t,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Sending Judge Request..."}),e.jsx(t,{variant:"body1",color:"textSecondary",children:"Please wait while we submit your request to become a judge for this hackathon."})]})})}):g?e.jsx(c,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(l,{elevation:3,children:e.jsxs(d,{sx:{p:4,textAlign:"center"},children:[e.jsx(p,{sx:{fontSize:60,color:"error.main",mb:2}}),e.jsx(t,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Request Failed"}),e.jsx(v,{severity:"error",sx:{mb:3},children:g}),e.jsxs(x,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(r,{variant:"contained",onClick:()=>j(),disabled:u,children:"Try Again"}),e.jsx(r,{variant:"outlined",onClick:()=>n(`/hackathons/${a}`),children:"Back to Hackathon"})]})]})})}):null:e.jsx(c,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(l,{elevation:3,children:e.jsxs(d,{sx:{p:4,textAlign:"center"},children:[e.jsx(p,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(t,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Authentication Required"}),e.jsx(t,{variant:"h6",color:"textSecondary",sx:{mb:3},children:"You need to be logged in to apply as a judge"}),e.jsx(t,{variant:"body1",sx:{mb:4},children:"Please sign in to your account to submit your judge application for this hackathon."}),e.jsxs(x,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(r,{variant:"contained",size:"large",onClick:()=>n("/login",{state:{returnTo:`/hackathons/${a}/apply-judge`}}),sx:{px:4,py:1.5},children:"Sign In"}),e.jsx(r,{variant:"outlined",size:"large",onClick:()=>n("/register",{state:{returnTo:`/hackathons/${a}/apply-judge`}}),sx:{px:4,py:1.5},children:"Create Account"})]})]})})})};export{R as default};
