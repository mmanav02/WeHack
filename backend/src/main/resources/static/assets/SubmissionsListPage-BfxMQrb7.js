import{r as n,j as t,C as m,B as l,l as N,i as a,y as P,h as d,G as f,m as R,n as D,o as E,$ as B}from"./mui-BflmY4qN.js";import{u as V,s as G}from"./index-KeRADMox.js";import{u as J}from"./router-DhxwaH8V.js";import{h as U,G as $,V as F,J as H}from"./mui-icons-5xIqF4du.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const q=()=>{const i=J(),{user:h}=V(),[u,x]=n.useState([]),[p,b]=n.useState([]),[y,g]=n.useState(!0),[j,k]=n.useState("");n.useEffect(()=>{S()},[h]);const S=async()=>{try{g(!0);try{const e=[1,2];let r=[];for(const s of e)try{const c=await G.getByHackathon(s);if(c.data&&c.data.length>0){const w=c.data.map(o=>({id:o.id,title:o.title||`Submission ${o.id}`,description:o.description||"No description available",teamName:o.teamName||`Team ${o.id}`,hackathonId:s,hackathonName:s===1?"nividia":"Adobe",submittedAt:o.submittedAt||new Date().toISOString()}));r=[...r,...w]}}catch{console.log(`No submissions found for hackathon ${s}`)}r.length>0?x(r):x([])}catch(e){console.error("Failed to fetch real submissions, no submissions available:",e),x([])}h&&await v()}catch(e){console.error("Failed to fetch data:",e),k("Failed to load submissions. Please try again.")}finally{g(!1)}},v=async()=>{try{b([{hackathonId:1,role:"JUDGE",status:"APPROVED"},{hackathonId:2,role:"PARTICIPANT",status:"APPROVED"}])}catch(e){console.error("Failed to fetch user roles:",e)}},I=e=>!h||!p.length?!1:!!p.find(s=>s.hackathonId===e&&s.role==="JUDGE"&&s.status==="APPROVED"),A=e=>{i(`/submissions/${e}`)},C=e=>{i(`/submissions/${e}/score`)};return y?t.jsx(m,{maxWidth:"lg",sx:{mt:8,mb:4},children:t.jsxs(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[t.jsx(N,{size:40}),t.jsx(a,{variant:"h6",sx:{ml:2},children:"Loading submissions..."})]})}):j?t.jsxs(m,{maxWidth:"lg",sx:{mt:8,mb:4},children:[t.jsx(P,{severity:"error",sx:{mb:3},children:j}),t.jsx(d,{variant:"contained",onClick:()=>i("/hackathons"),children:"Back to Hackathons"})]}):t.jsxs(m,{maxWidth:"lg",sx:{mt:4,mb:6},children:[t.jsxs(l,{sx:{textAlign:"center",mb:4},children:[t.jsx(U,{sx:{fontSize:60,color:"primary.main",mb:2}}),t.jsx(a,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"All Submissions"}),t.jsx(a,{variant:"h6",color:"textSecondary",children:"Browse and judge hackathon submissions"})]}),u.length===0?t.jsxs(l,{sx:{textAlign:"center",py:8},children:[t.jsx(a,{variant:"h5",gutterBottom:!0,children:"No Submissions Found"}),t.jsx(a,{variant:"body1",color:"textSecondary",sx:{mb:3},children:"No projects have been submitted to hackathons yet. Submissions will appear here once participants submit their projects."}),t.jsx(a,{variant:"body2",color:"textSecondary",sx:{mb:3},children:"To submit a project, participants need to use the submission API endpoint after joining a hackathon."}),t.jsx(d,{variant:"contained",onClick:()=>i("/hackathons"),children:"View Hackathons"})]}):t.jsx(f,{container:!0,spacing:3,children:u.map(e=>t.jsx(f,{item:!0,xs:12,md:6,lg:4,children:t.jsxs(R,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},children:[t.jsxs(D,{sx:{flexGrow:1},children:[t.jsx(a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:e.title}),e.teamName&&t.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx($,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(a,{variant:"body2",color:"textSecondary",children:e.teamName})]}),t.jsx(a,{variant:"body2",color:"textSecondary",sx:{mb:2,lineHeight:1.6},children:e.description.length>120?`${e.description.substring(0,120)}...`:e.description}),e.hackathonName&&t.jsx(E,{label:e.hackathonName,size:"small",color:"primary",variant:"outlined",sx:{mb:2}}),e.submittedAt&&t.jsxs(a,{variant:"caption",color:"textSecondary",children:["Submitted: ",new Date(e.submittedAt).toLocaleDateString()]})]}),t.jsxs(B,{sx:{p:2,pt:0},children:[t.jsx(d,{variant:"outlined",startIcon:t.jsx(F,{}),onClick:()=>A(e.id),sx:{mr:1},children:"View Details"}),I(e.hackathonId||0)&&t.jsx(d,{variant:"contained",startIcon:t.jsx(H,{}),onClick:()=>C(e.id),color:"primary",children:"Judge"})]})]})},e.id))})]})};export{q as default};
