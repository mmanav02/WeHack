import{r as l,j as t,C as d,B as n,l as F,i as a,y as H,h,o as p,P as L,G as f,m as W,n as A,x as E,_ as z}from"./mui-D_VXG_-A.js";import{h as b}from"./index-BoPtzRr-.js";import{b as T,u as R}from"./router-BvxwVjPs.js";import{B as y,T as v,h as N}from"./mui-icons-Bo5rYZLF.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const _=()=>{const{hackathonId:o}=T(),c=R(),[r,k]=l.useState(null),[i,S]=l.useState([]),[C,x]=l.useState(!0),[m,u]=l.useState("");l.useEffect(()=>{o&&(I(),B())},[o]);const I=async()=>{try{const s=(await b.getAll()).data.find(w=>w.id===parseInt(o));s&&k({id:s.id,title:s.title,status:s.status})}catch(e){console.error("Failed to fetch hackathon data:",e)}},B=async()=>{try{x(!0);const e=await b.getLeaderboard(parseInt(o));S(e.data||[]),console.log("📊 Leaderboard data:",e.data)}catch(e){console.error("Failed to fetch leaderboard:",e),e.response?.status===404?u("Hackathon not found."):u("Failed to load leaderboard. Please try again.")}finally{x(!1)}},g=e=>{switch(e){case 1:return"#FFD700";case 2:return"#C0C0C0";case 3:return"#CD7F32";default:return"#E0E0E0"}},D=e=>e<=3?t.jsx(v,{sx:{color:g(e),fontSize:40}}):t.jsx(z,{sx:{bgcolor:"primary.main",width:40,height:40},children:e}),P=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return C?t.jsx(d,{maxWidth:"lg",sx:{mt:8,mb:4},children:t.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[t.jsx(F,{size:40}),t.jsx(a,{variant:"h6",sx:{ml:2},children:"Loading leaderboard..."})]})}):m?t.jsxs(d,{maxWidth:"lg",sx:{mt:8,mb:4},children:[t.jsx(H,{severity:"error",sx:{mb:3},children:m}),t.jsx(h,{variant:"contained",startIcon:t.jsx(y,{}),onClick:()=>c(`/hackathons/${o}`),children:"Back to Hackathon"})]}):t.jsxs(d,{maxWidth:"lg",sx:{mt:4,mb:6},children:[t.jsxs(n,{sx:{textAlign:"center",mb:4},children:[t.jsx(v,{sx:{fontSize:80,color:"primary.main",mb:2}}),t.jsx(a,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"🏆 Leaderboard"}),r&&t.jsx(a,{variant:"h5",color:"textSecondary",gutterBottom:!0,children:r.title}),r&&t.jsx(p,{label:r.status,color:r.status==="Completed"?"success":"info",sx:{mb:3}})]}),t.jsx(n,{sx:{mb:3},children:t.jsx(h,{variant:"outlined",startIcon:t.jsx(y,{}),onClick:()=>c(`/hackathons/${o}`),children:"Back to Hackathon Details"})}),i.length===0?t.jsxs(L,{elevation:3,sx:{p:4,textAlign:"center"},children:[t.jsx(a,{variant:"h6",gutterBottom:!0,children:"No Submissions Yet"}),t.jsx(a,{variant:"body1",color:"textSecondary",children:r?.status==="Draft"||r?.status==="Published"?"The leaderboard will be available once judging begins.":"No submissions have been made for this hackathon yet."})]}):t.jsx(f,{container:!0,spacing:3,children:i.map((e,j)=>{const s=j+1;return t.jsx(f,{item:!0,xs:12,children:t.jsx(W,{elevation:s<=3?6:2,sx:{position:"relative",border:s<=3?`3px solid ${g(s)}`:"none","&:hover":{elevation:4}},children:t.jsx(A,{children:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:3},children:[t.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80},children:[D(s),t.jsxs(a,{variant:"h6",sx:{mt:1,fontWeight:"bold"},children:["#",s]})]}),t.jsx(E,{orientation:"vertical",flexItem:!0}),t.jsxs(n,{sx:{flex:1},children:[t.jsx(a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:e.title}),t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[t.jsx(N,{sx:{fontSize:20,color:"text.secondary"}}),t.jsxs(a,{variant:"body2",color:"textSecondary",children:[e.user.username," (",e.user.email,")"]}),e.team&&t.jsx(t.Fragment,{children:t.jsx(p,{label:e.team.name,size:"small",variant:"outlined"})})]}),t.jsxs(a,{variant:"body2",color:"textSecondary",sx:{mb:2},children:["Submitted: ",P(e.submitTime)]}),t.jsx(a,{variant:"body1",sx:{lineHeight:1.6},children:e.description||"No description provided."})]}),t.jsx(n,{sx:{minWidth:120},children:t.jsx(h,{variant:"outlined",onClick:()=>c(`/submissions/${e.id}`),size:"small",children:"View Details"})})]})})})},e.id)})}),i.length>0&&t.jsx(n,{sx:{mt:4,textAlign:"center"},children:t.jsxs(a,{variant:"body2",color:"textSecondary",children:["Showing ",i.length," submission",i.length!==1?"s":"",r?.status==="Judging"&&" • Rankings updated in real-time",r?.status==="Completed"&&" • Final Results"]})})]})};export{_ as default};
