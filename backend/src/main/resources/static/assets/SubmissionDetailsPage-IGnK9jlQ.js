import{r as d,j as e,m as l,n as c,l as C,i as s,y as A,B as r,o as S,C as g,h,P as W,G as v,x as F}from"./mui-D_VXG_-A.js";import{j as U,u as N,s as B}from"./index-BoPtzRr-.js";import{T as D,i as w,b as P,G as L,j as T,J as I,k as E}from"./mui-icons-Bo5rYZLF.js";import{b as G,u as H}from"./router-BvxwVjPs.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const z=({submissionId:a})=>{const[o,p]=d.useState(null),[t,j]=d.useState(!0),[f,x]=d.useState("");d.useEffect(()=>{b()},[a]);const b=async()=>{try{j(!0),x("");const n=await U.getFinalScore(a);p(n.data)}catch(n){console.error("Failed to fetch final score:",n),n.response?.status===500&&n.response?.data?.message?.includes("Submission not found")?x("This submission does not exist in the database yet."):n.response?.status===404?x("No scores available for this submission."):x("Failed to load final score.")}finally{j(!1)}},m=n=>n>=8?"success":n>=6?"warning":"error",y=n=>n>=9?"Outstanding":n>=8?"Excellent":n>=7?"Very Good":n>=6?"Good":n>=5?"Average":"Needs Improvement";return t?e.jsx(l,{elevation:2,children:e.jsxs(c,{sx:{textAlign:"center",py:3},children:[e.jsx(C,{size:30}),e.jsx(s,{variant:"body2",sx:{mt:1},children:"Loading final score..."})]})}):f?e.jsx(A,{severity:"error",children:f}):o===null?e.jsx(l,{elevation:2,children:e.jsx(c,{sx:{textAlign:"center",py:3},children:e.jsx(s,{variant:"body1",color:"textSecondary",children:"No scores available yet"})})}):e.jsx(l,{elevation:2,children:e.jsxs(c,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(D,{sx:{mr:2,color:"primary.main",fontSize:30}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Final Score"})]}),e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h2",sx:{fontWeight:"bold",mb:1},children:o.toFixed(1)}),e.jsx(s,{variant:"h6",color:"textSecondary",sx:{mb:2},children:"out of 10"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1},children:e.jsx(S,{label:y(o),color:m(o),variant:"filled",icon:e.jsx(w,{})})})]})]})})},q=()=>{const{submissionId:a}=G(),o=H(),{user:p}=N(),[t,j]=d.useState(null),[f,x]=d.useState(!0),[b,m]=d.useState("");d.useEffect(()=>{a&&y()},[a]);const y=async()=>{try{x(!0);const i=(await B.getById(parseInt(a))).data;if(i){const k={id:i.id,title:i.title||`Submission ${i.id}`,description:i.description||"No description provided.",teamName:i.team?.name||`Team ${i.team?.id||"Unknown"}`,projectUrl:i.projectUrl,repoUrl:i.repoUrl,technology:i.technology||[],submittedAt:i.submitTime,hackathonId:i.hackathon?.id,hackathonName:i.hackathon?.title||"Unknown Hackathon"};j(k),console.log("ðŸ“‹ Found submission:",k)}else m("Submission not found. It may have been deleted or you may not have permission to view it.")}catch(u){console.error("Failed to fetch submission:",u),u.response?.status===404?m("Submission not found. It may have been deleted or you may not have permission to view it."):m("Failed to load submission details. Please try again.")}finally{x(!1)}},n=()=>{o(`/submissions/${a}/score`)};return f?e.jsx(g,{maxWidth:"lg",sx:{mt:8,mb:4},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[e.jsx(C,{size:40}),e.jsx(s,{variant:"h6",sx:{ml:2},children:"Loading submission details..."})]})}):b?e.jsxs(g,{maxWidth:"lg",sx:{mt:8,mb:4},children:[e.jsx(A,{severity:"error",sx:{mb:3},children:b}),e.jsx(h,{variant:"contained",onClick:()=>o("/hackathons"),children:"Back to Hackathons"})]}):t?e.jsxs(g,{maxWidth:"lg",sx:{mt:4,mb:6},children:[e.jsxs(r,{sx:{textAlign:"center",mb:4},children:[e.jsx(P,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:t.title}),t.teamName&&e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,mb:2},children:[e.jsx(L,{sx:{color:"text.secondary"}}),e.jsx(s,{variant:"h6",color:"textSecondary",children:t.teamName})]}),t.hackathonName&&e.jsx(S,{label:t.hackathonName,color:"primary",variant:"outlined"})]}),e.jsxs(v,{container:!0,spacing:4,children:[e.jsxs(v,{item:!0,xs:12,md:8,children:[e.jsx(l,{elevation:2,sx:{mb:3},children:e.jsxs(c,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Project Description"}),e.jsx(s,{variant:"body1",sx:{lineHeight:1.8},children:t.description})]})}),t.technology&&t.technology.length>0&&e.jsx(l,{elevation:2,sx:{mb:3},children:e.jsxs(c,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(T,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Technology Stack"})]}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.technology.map((u,i)=>e.jsx(S,{label:u,variant:"outlined",size:"small"},i))})]})}),(t.projectUrl||t.repoUrl)&&e.jsx(l,{elevation:2,sx:{mb:3},children:e.jsxs(c,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Project Links"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.projectUrl&&e.jsx(h,{variant:"outlined",href:t.projectUrl,target:"_blank",rel:"noopener noreferrer",sx:{justifyContent:"flex-start"},children:"ðŸŒ Live Demo"}),t.repoUrl&&e.jsx(h,{variant:"outlined",href:t.repoUrl,target:"_blank",rel:"noopener noreferrer",sx:{justifyContent:"flex-start"},children:"ðŸ“ Source Code"})]})]})}),p&&e.jsx(l,{elevation:2,children:e.jsxs(c,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(I,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Judge Actions"})]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(h,{variant:"contained",onClick:n,startIcon:e.jsx(I,{}),children:"Submit Score"}),e.jsx(h,{variant:"outlined",startIcon:e.jsx(E,{}),disabled:!0,children:"Add Comments (Coming Soon)"})]})]})})]}),e.jsxs(v,{item:!0,xs:12,md:4,children:[e.jsx(r,{sx:{mb:3},children:e.jsx(z,{submissionId:parseInt(a)})}),e.jsx(l,{elevation:2,children:e.jsxs(c,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Submission Info"}),e.jsx(F,{sx:{mb:2}}),t.submittedAt&&e.jsxs(r,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"textSecondary",children:"Submitted"}),e.jsx(s,{variant:"body1",sx:{fontWeight:"medium"},children:new Date(t.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs(r,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"textSecondary",children:"Submission ID"}),e.jsxs(s,{variant:"body1",sx:{fontWeight:"medium",fontFamily:"monospace"},children:["#",t.id]})]}),t.hackathonId&&e.jsx(r,{children:e.jsx(h,{variant:"text",onClick:()=>o(`/hackathons/${t.hackathonId}`),sx:{p:0,justifyContent:"flex-start"},children:"View Hackathon Details â†’"})})]})})]})]})]}):e.jsx(g,{maxWidth:"lg",sx:{mt:8,mb:4},children:e.jsxs(W,{elevation:3,sx:{p:4,textAlign:"center"},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"Submission Not Found"}),e.jsx(s,{variant:"body1",color:"textSecondary",sx:{mb:3},children:"The submission you're looking for doesn't exist or has been removed."}),e.jsx(h,{variant:"contained",onClick:()=>o("/hackathons"),children:"Back to Hackathons"})]})})};export{q as default};
