import{r as o,j as e,C as g,P as f,i as s,h as p,B as i,l as B,y as H,m as u,n as h,o as S,O as I,x as J}from"./mui-BflmY4qN.js";import{u as N,j as R}from"./index-KeRADMox.js";import{b as _,u as q}from"./router-DhxwaH8V.js";import{J as C,I as $,a as G,E as O,S as Q}from"./mui-icons-5xIqF4du.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const se=()=>{const{submissionId:r}=_(),b=q(),{user:v}=N(),[c,P]=o.useState(null),[A,j]=o.useState(!0),[l,V]=o.useState(!1),[E,w]=o.useState(!1),[k,a]=o.useState(""),[d,z]=o.useState(5),[m,D]=o.useState(5),[x,T]=o.useState(5);o.useEffect(()=>{r&&F()},[r]);const F=async()=>{try{j(!0);const n={id:parseInt(r),title:`Innovative Project ${r}`,description:"A comprehensive solution that addresses real-world challenges through innovative technology implementation.",teamName:`Team Beta ${r}`};P(n)}catch(n){console.error("Failed to fetch submission:",n),a("Failed to load submission details. Please try again.")}finally{j(!1)}},L=async n=>{if(n.preventDefault(),!v){a("You must be logged in to submit scores.");return}try{j(!0),a("");const t={submissionId:parseInt(r),judgeId:v.id,innovation:d,impact:m,execution:x};console.log("Submitting score data:",t),await R.submitScore(t),w(!0),setTimeout(()=>{b("/submissions")},2e3)}catch(t){console.error("Failed to submit score:",t),t.response?.status===500&&t.response?.data?.message?.includes("Submission not found")?a("This submission does not exist in the database. Please contact the administrator."):t.response?.status===401||t.response?.status===403?a("You are not authorized to score this submission."):t.response?.status===400?a("Invalid score data. Please check your inputs and try again."):a(t.response?.data?.message||"Failed to submit score. Please try again.")}finally{j(!1)}},y=n=>n>=8?"success":n>=6?"warning":"error",W=d+m+x,Y=(W/3).toFixed(1);return v?A?e.jsx(g,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsxs(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[e.jsx(B,{size:40}),e.jsx(s,{variant:"h6",sx:{ml:2},children:"Loading submission..."})]})}):E?e.jsx(g,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsxs(f,{elevation:3,sx:{p:4,textAlign:"center"},children:[e.jsx(C,{sx:{fontSize:60,color:"success.main",mb:2}}),e.jsx(s,{variant:"h4",color:"success.main",gutterBottom:!0,children:"Score Submitted Successfully! ðŸŽ‰"}),e.jsx(s,{variant:"h6",sx:{mb:2},children:"Thank you for judging this submission."}),e.jsx(s,{variant:"body1",sx:{mb:2},children:"Your scores have been recorded and will contribute to the final evaluation."}),e.jsx(s,{variant:"body2",color:"textSecondary",children:"Redirecting to submissions page in 2 seconds..."}),e.jsxs(i,{sx:{mt:3},children:[e.jsx(p,{variant:"contained",onClick:()=>b("/submissions"),sx:{mr:2},children:"View Submissions"}),e.jsx(p,{variant:"outlined",onClick:()=>b("/hackathons"),children:"Back to Hackathons"})]})]})}):e.jsxs(g,{maxWidth:"md",sx:{mt:4,mb:6},children:[e.jsxs(i,{sx:{textAlign:"center",mb:4},children:[e.jsx(C,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Submit Score"}),e.jsx(s,{variant:"h6",color:"textSecondary",children:"Evaluate this hackathon submission"})]}),k&&e.jsx(H,{severity:"error",sx:{mb:3},children:k}),c&&e.jsx(u,{sx:{mb:3},elevation:2,children:e.jsxs(h,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:c.title}),c.teamName&&e.jsxs(s,{variant:"subtitle1",color:"textSecondary",sx:{mb:2},children:["by ",c.teamName]}),e.jsx(s,{variant:"body1",children:c.description})]})}),e.jsxs(f,{elevation:3,sx:{p:4},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",mb:3},children:"Judge Evaluation"}),e.jsxs(i,{component:"form",onSubmit:L,children:[e.jsx(u,{sx:{mb:3},elevation:1,children:e.jsxs(h,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx($,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Innovation"}),e.jsx(S,{label:d,color:y(d),sx:{ml:"auto"}})]}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"How creative and original is this solution?"}),e.jsx(I,{value:d,onChange:(n,t)=>z(t),min:1,max:10,step:1,marks:!0,valueLabelDisplay:"auto",disabled:l})]})}),e.jsx(u,{sx:{mb:3},elevation:1,children:e.jsxs(h,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(G,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Impact"}),e.jsx(S,{label:m,color:y(m),sx:{ml:"auto"}})]}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"What potential does this solution have to solve real problems?"}),e.jsx(I,{value:m,onChange:(n,t)=>D(t),min:1,max:10,step:1,marks:!0,valueLabelDisplay:"auto",disabled:l})]})}),e.jsx(u,{sx:{mb:3},elevation:1,children:e.jsxs(h,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(O,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Execution"}),e.jsx(S,{label:x,color:y(x),sx:{ml:"auto"}})]}),e.jsx(s,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"How well is this solution implemented and presented?"}),e.jsx(I,{value:x,onChange:(n,t)=>T(t),min:1,max:10,step:1,marks:!0,valueLabelDisplay:"auto",disabled:l})]})}),e.jsx(J,{sx:{my:3}}),e.jsxs(i,{sx:{textAlign:"center",mb:3},children:[e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["Total Score: ",W,"/30"]}),e.jsxs(s,{variant:"h4",color:"primary.main",sx:{fontWeight:"bold"},children:["Average: ",Y,"/10"]})]}),e.jsx(i,{sx:{textAlign:"center"},children:e.jsx(p,{type:"submit",variant:"contained",size:"large",disabled:l,startIcon:l?e.jsx(B,{size:20}):e.jsx(Q,{}),sx:{px:6,py:1.5,fontSize:"1.1rem",fontWeight:"bold",borderRadius:3,background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(25, 118, 210, 0.3)"},"&:disabled":{background:"grey.300",transform:"none"}},children:l?"Submitting Score...":"Submit Score"})})]})]}),e.jsx(u,{sx:{mt:3},elevation:1,children:e.jsxs(h,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"ðŸ“‹ Judging Guidelines"}),e.jsx(s,{variant:"body2",color:"textSecondary",component:"div",children:e.jsxs(i,{component:"ul",sx:{pl:2,m:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Innovation (1-10):"})," Creativity, originality, and uniqueness of the solution"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Impact (1-10):"})," Potential to solve real problems and create value"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Execution (1-10):"})," Quality of implementation, presentation, and completeness"]})]})})]})})]}):e.jsx(g,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsxs(f,{elevation:3,sx:{p:4,textAlign:"center"},children:[e.jsx(C,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(s,{variant:"h4",gutterBottom:!0,children:"Authentication Required"}),e.jsx(s,{variant:"body1",color:"textSecondary",children:"You must be logged in as a judge to submit scores."}),e.jsx(p,{variant:"contained",sx:{mt:2},onClick:()=>b("/login"),children:"Sign In"})]})})};export{se as default};
