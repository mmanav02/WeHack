import{r as c,j as e,m as a,n as l,l as I,i as s,y as k,B as r,o as v,C as f,h as x,P as A,G as y,x as W}from"./mui-BflmY4qN.js";import{j as D,u as F}from"./index-KeRADMox.js";import{T as N,g as B,h as T,G as P,i as L,J as S,j as U}from"./mui-icons-5xIqF4du.js";import{b as w,u as E}from"./router-DhxwaH8V.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const G=({submissionId:i})=>{const[o,g]=c.useState(null),[t,m]=c.useState(!0),[u,d]=c.useState("");c.useEffect(()=>{j()},[i]);const j=async()=>{try{m(!0),d("");const n=await D.getFinalScore(i);g(n.data)}catch(n){console.error("Failed to fetch final score:",n),n.response?.status===500&&n.response?.data?.message?.includes("Submission not found")?d("This submission does not exist in the database yet."):n.response?.status===404?d("No scores available for this submission."):d("Failed to load final score.")}finally{m(!1)}},p=n=>n>=8?"success":n>=6?"warning":"error",b=n=>n>=9?"Outstanding":n>=8?"Excellent":n>=7?"Very Good":n>=6?"Good":n>=5?"Average":"Needs Improvement";return t?e.jsx(a,{elevation:2,children:e.jsxs(l,{sx:{textAlign:"center",py:3},children:[e.jsx(I,{size:30}),e.jsx(s,{variant:"body2",sx:{mt:1},children:"Loading final score..."})]})}):u?e.jsx(k,{severity:"error",children:u}):o===null?e.jsx(a,{elevation:2,children:e.jsx(l,{sx:{textAlign:"center",py:3},children:e.jsx(s,{variant:"body1",color:"textSecondary",children:"No scores available yet"})})}):e.jsx(a,{elevation:2,children:e.jsxs(l,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(N,{sx:{mr:2,color:"primary.main",fontSize:30}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Final Score"})]}),e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(s,{variant:"h2",sx:{fontWeight:"bold",mb:1},children:o.toFixed(1)}),e.jsx(s,{variant:"h6",color:"textSecondary",sx:{mb:2},children:"out of 10"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1},children:e.jsx(v,{label:b(o),color:p(o),variant:"filled",icon:e.jsx(B,{})})})]})]})})},R=()=>{const{submissionId:i}=w(),o=E(),{user:g}=F(),[t,m]=c.useState(null),[u,d]=c.useState(!0),[j,p]=c.useState("");c.useEffect(()=>{i&&b()},[i]);const b=async()=>{try{d(!0);const h={id:parseInt(i),title:`Sample Project ${i}`,description:`This is a detailed description of submission ${i}. This project demonstrates innovative use of technology to solve real-world problems. The team has implemented cutting-edge solutions with excellent execution and potential for significant impact.`,teamName:`Team Alpha ${i}`,projectUrl:"https://example.com/demo",repoUrl:"https://github.com/example/project",technology:["React","Node.js","MongoDB","AI/ML"],submittedAt:new Date().toISOString(),hackathonId:1,hackathonName:"Tech Innovation 2024"};m(h)}catch(h){console.error("Failed to fetch submission:",h),p("Failed to load submission details. Please try again.")}finally{d(!1)}},n=()=>{o(`/submissions/${i}/score`)};return u?e.jsx(f,{maxWidth:"lg",sx:{mt:8,mb:4},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[e.jsx(I,{size:40}),e.jsx(s,{variant:"h6",sx:{ml:2},children:"Loading submission details..."})]})}):j?e.jsxs(f,{maxWidth:"lg",sx:{mt:8,mb:4},children:[e.jsx(k,{severity:"error",sx:{mb:3},children:j}),e.jsx(x,{variant:"contained",onClick:()=>o("/hackathons"),children:"Back to Hackathons"})]}):t?e.jsxs(f,{maxWidth:"lg",sx:{mt:4,mb:6},children:[e.jsxs(r,{sx:{textAlign:"center",mb:4},children:[e.jsx(T,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:t.title}),t.teamName&&e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,mb:2},children:[e.jsx(P,{sx:{color:"text.secondary"}}),e.jsx(s,{variant:"h6",color:"textSecondary",children:t.teamName})]}),t.hackathonName&&e.jsx(v,{label:t.hackathonName,color:"primary",variant:"outlined"})]}),e.jsxs(y,{container:!0,spacing:4,children:[e.jsxs(y,{item:!0,xs:12,md:8,children:[e.jsx(a,{elevation:2,sx:{mb:3},children:e.jsxs(l,{children:[e.jsx(s,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Project Description"}),e.jsx(s,{variant:"body1",sx:{lineHeight:1.8},children:t.description})]})}),t.technology&&t.technology.length>0&&e.jsx(a,{elevation:2,sx:{mb:3},children:e.jsxs(l,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(L,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Technology Stack"})]}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.technology.map((h,C)=>e.jsx(v,{label:h,variant:"outlined",size:"small"},C))})]})}),(t.projectUrl||t.repoUrl)&&e.jsx(a,{elevation:2,sx:{mb:3},children:e.jsxs(l,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Project Links"}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.projectUrl&&e.jsx(x,{variant:"outlined",href:t.projectUrl,target:"_blank",rel:"noopener noreferrer",sx:{justifyContent:"flex-start"},children:"ðŸŒ Live Demo"}),t.repoUrl&&e.jsx(x,{variant:"outlined",href:t.repoUrl,target:"_blank",rel:"noopener noreferrer",sx:{justifyContent:"flex-start"},children:"ðŸ“ Source Code"})]})]})}),g&&e.jsx(a,{elevation:2,children:e.jsxs(l,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(S,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:"Judge Actions"})]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[e.jsx(x,{variant:"contained",onClick:n,startIcon:e.jsx(S,{}),children:"Submit Score"}),e.jsx(x,{variant:"outlined",startIcon:e.jsx(U,{}),disabled:!0,children:"Add Comments (Coming Soon)"})]})]})})]}),e.jsxs(y,{item:!0,xs:12,md:4,children:[e.jsx(r,{sx:{mb:3},children:e.jsx(G,{submissionId:parseInt(i)})}),e.jsx(a,{elevation:2,children:e.jsxs(l,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Submission Info"}),e.jsx(W,{sx:{mb:2}}),t.submittedAt&&e.jsxs(r,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"textSecondary",children:"Submitted"}),e.jsx(s,{variant:"body1",sx:{fontWeight:"medium"},children:new Date(t.submittedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs(r,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",color:"textSecondary",children:"Submission ID"}),e.jsxs(s,{variant:"body1",sx:{fontWeight:"medium",fontFamily:"monospace"},children:["#",t.id]})]}),t.hackathonId&&e.jsx(r,{children:e.jsx(x,{variant:"text",onClick:()=>o(`/hackathons/${t.hackathonId}`),sx:{p:0,justifyContent:"flex-start"},children:"View Hackathon Details â†’"})})]})})]})]})]}):e.jsx(f,{maxWidth:"lg",sx:{mt:8,mb:4},children:e.jsxs(A,{elevation:3,sx:{p:4,textAlign:"center"},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"Submission Not Found"}),e.jsx(s,{variant:"body1",color:"textSecondary",sx:{mb:3},children:"The submission you're looking for doesn't exist or has been removed."}),e.jsx(x,{variant:"contained",onClick:()=>o("/hackathons"),children:"Back to Hackathons"})]})})};export{R as default};
