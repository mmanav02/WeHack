import{r as s,j as e,C as A,B as n,l as I,i as a,y as W,m as u,n as g,G as o,a1 as B,I as E,o as L,L as _,f as z,X as F,Y as P,g as G,p as O,q as N,s as H,v as U,t as $,h as T}from"./mui-BflmY4qN.js";import{u as q}from"./index-KeRADMox.js";import{b as R}from"./router-DhxwaH8V.js";import{k as V,G as X,l as Y}from"./mui-icons-5xIqF4du.js";import"./react--cgwBsGs.js";import"./api-xsH4HHeE.js";const re=()=>{const{hackathonId:l}=R(),{user:J}=q(),[C,p]=s.useState(!0),[i,w]=s.useState([]),[j,m]=s.useState(""),[c,b]=s.useState(null),[M,x]=s.useState(!1),[d,h]=s.useState(""),[y,f]=s.useState(!1);s.useEffect(()=>{l&&v()},[l]);const v=async()=>{try{p(!0);const t=[{id:1,name:"AI Innovators",hackathonId:parseInt(l),members:[{id:1,username:"alice_dev",email:"alice@example.com",role:"Team Lead"},{id:2,username:"bob_ai",email:"bob@example.com",role:"AI Specialist"},{id:3,username:"charlie_ui",email:"charlie@example.com",role:"UI Designer"}],createdAt:new Date().toISOString()},{id:2,name:"Blockchain Builders",hackathonId:parseInt(l),members:[{id:4,username:"diana_block",email:"diana@example.com",role:"Blockchain Dev"},{id:5,username:"eve_smart",email:"eve@example.com",role:"Smart Contracts"}],createdAt:new Date().toISOString()},{id:3,name:"IoT Solutions",hackathonId:parseInt(l),members:[{id:6,username:"frank_iot",email:"frank@example.com",role:"IoT Engineer"},{id:7,username:"grace_hw",email:"grace@example.com",role:"Hardware Dev"},{id:8,username:"henry_data",email:"henry@example.com",role:"Data Scientist"},{id:9,username:"iris_mobile",email:"iris@example.com",role:"Mobile Dev"}],createdAt:new Date().toISOString()}];w(t)}catch(t){console.error("Failed to fetch teams:",t),m("Failed to load teams. Please try again.")}finally{p(!1)}},D=async()=>{if(!(!c||!d.trim()))try{f(!0),console.log("Adding member:",d,"to team:",c.id),h(""),x(!1),await v()}catch(t){console.error("Failed to add team member:",t),m("Failed to add team member. Please try again.")}finally{f(!1)}},k=t=>{b(t),x(!0)},S=()=>{x(!1),b(null),h("")};return C?e.jsx(A,{maxWidth:"lg",sx:{mt:8,mb:4},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[e.jsx(I,{size:40}),e.jsx(a,{variant:"h6",sx:{ml:2},children:"Loading teams..."})]})}):e.jsxs(A,{maxWidth:"lg",sx:{mt:4,mb:6},children:[e.jsxs(n,{sx:{textAlign:"center",mb:4},children:[e.jsx(V,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(a,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Team Management"}),e.jsx(a,{variant:"h6",color:"textSecondary",children:"View and manage all teams participating in this hackathon"})]}),j&&e.jsx(W,{severity:"error",sx:{mb:3},onClose:()=>m(""),children:j}),e.jsx(u,{sx:{mb:3},elevation:2,children:e.jsxs(g,{children:[e.jsx(a,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Teams Overview"}),e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsxs(n,{sx:{textAlign:"center",p:2},children:[e.jsx(a,{variant:"h3",color:"primary.main",sx:{fontWeight:"bold"},children:i.length}),e.jsx(a,{variant:"body1",color:"textSecondary",children:"Total Teams"})]})}),e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsxs(n,{sx:{textAlign:"center",p:2},children:[e.jsx(a,{variant:"h3",color:"success.main",sx:{fontWeight:"bold"},children:i.reduce((t,r)=>t+r.members.length,0)}),e.jsx(a,{variant:"body1",color:"textSecondary",children:"Total Participants"})]})}),e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsxs(n,{sx:{textAlign:"center",p:2},children:[e.jsx(a,{variant:"h3",color:"warning.main",sx:{fontWeight:"bold"},children:Math.round(i.reduce((t,r)=>t+r.members.length,0)/i.length||0)}),e.jsx(a,{variant:"body1",color:"textSecondary",children:"Avg Team Size"})]})})]})]})}),i.length===0?e.jsx(u,{elevation:2,children:e.jsxs(g,{sx:{p:4,textAlign:"center"},children:[e.jsx(X,{sx:{fontSize:48,color:"grey.400",mb:2}}),e.jsx(a,{variant:"h6",color:"textSecondary",children:"No teams registered yet"}),e.jsx(a,{variant:"body2",color:"textSecondary",children:"Teams will appear here once participants start registering."})]})}):e.jsx(o,{container:!0,spacing:3,children:i.map(t=>e.jsx(o,{item:!0,xs:12,md:6,lg:4,children:e.jsxs(u,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(g,{sx:{flexGrow:1},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:"primary.main"},children:t.name}),e.jsx(B,{title:"Add Team Member",children:e.jsx(E,{size:"small",onClick:()=>k(t),sx:{color:"primary.main"},children:e.jsx(Y,{})})})]}),e.jsx(n,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsx(L,{label:`${t.members.length} member${t.members.length!==1?"s":""}`,size:"small",color:"primary",variant:"outlined"})}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Team Members:"}),e.jsx(_,{dense:!0,sx:{pt:0},children:t.members.map(r=>e.jsxs(z,{sx:{px:0,py:.5},children:[e.jsx(F,{children:e.jsx(P,{sx:{width:24,height:24,fontSize:"0.8rem"},children:r.username.charAt(0).toUpperCase()})}),e.jsx(G,{primary:e.jsx(a,{variant:"body2",sx:{fontWeight:"medium"},children:r.username}),secondary:e.jsx(a,{variant:"caption",color:"textSecondary",children:r.email})})]},r.id))})]}),t.createdAt&&e.jsx(n,{sx:{p:2,pt:0},children:e.jsxs(a,{variant:"caption",color:"textSecondary",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})})]})},t.id))}),e.jsxs(O,{open:M,onClose:S,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(N,{children:["Add Team Member",c&&e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Adding to: ",c.name]})]}),e.jsxs(H,{children:[e.jsx(U,{autoFocus:!0,margin:"dense",label:"Member Email",type:"email",fullWidth:!0,variant:"outlined",value:d,onChange:t=>h(t.target.value),placeholder:"Enter the email of the user to add",sx:{mt:2}}),e.jsx(a,{variant:"body2",color:"textSecondary",sx:{mt:2},children:"Note: The user must have an account on the platform to be added to the team."})]}),e.jsxs($,{children:[e.jsx(T,{onClick:S,children:"Cancel"}),e.jsx(T,{onClick:D,variant:"contained",disabled:!d.trim()||y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:16,sx:{mr:1}}),"Adding..."]}):"Add Member"})]})]})]})};export{re as default};
